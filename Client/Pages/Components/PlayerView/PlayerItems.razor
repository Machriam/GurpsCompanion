@using GurpsCompanion.Shared.DataModel
@inject HttpClient Http

<EditForm Model="ItemEditModel" OnSubmit="UpdateItem">
    <DataAnnotationsValidator></DataAnnotationsValidator>
    <ValidationSummary></ValidationSummary>
    @if (SelectedCharacterModel != null)
    {
        <table class="table" style="height:500px; overflow-y:scroll">
            @foreach (var item in Items)
            {
                <tr>
                    <td>@item.Name (@item.Price.ToString("C2"))<br />@item.Description</td>
                </tr>
            }
        </table>
        var itemDivClass = "ml-1 flex-fill";
        <DataList Items="ItemNames" InputHasChanged="InputHasChanged" LabelText="Select Item"></DataList>
        <div class="d-flex col-md-12 flex-wrap">
            <div class="@itemDivClass">
                <label class="col-form-label">Name</label>
                <InputText @bind-Value="@ItemEditModel.Name" class="form-control col-md-4"></InputText>
            </div>
            <div class="@itemDivClass">
                <label class="col-form-label">Price</label>
                <InputNumber @bind-Value="@ItemEditModel.Price" class="form-control col-md-2"></InputNumber>
            </div>
            <div class="@itemDivClass">
                <label class="col-form-label">Weight</label>
                <InputNumber @bind-Value="@ItemEditModel.Weight" class="form-control col-md-2"></InputNumber>
            </div>
            <div class="@itemDivClass">
                <label class="col-form-label">Description</label>
                <InputTextArea @bind-Value="@ItemEditModel.Description" class="form-control col-md-6"></InputTextArea>
            </div>
            <div class="d-flex justify-content-between col-md-12">
                <button class="btn btn-primary m-2" @onclick="()=>SubmitAction=Core.CrudActions.Add" type="submit">Add new Item</button>
                <button class="btn btn-primary m-2" @onclick="()=>SubmitAction=Core.CrudActions.Update" type="submit">Update Item</button>
                <button class="btn btn-primary m-2" @onclick="()=>SubmitAction=Core.CrudActions.Delete" type="submit">Delete Item</button>
            </div>
        </div>
    }
</EditForm>